# 模块与包

## 1. 自定义模块

在开发简单的程序时，使用一个py文件就可以搞定，如果程序比较庞大，需要些10w行代码，为了编写可维护的代码，我们把很多函数分组，拆分到不同的py文件中。如果发现拆分到py文件中的代码还是太多，也可以通过文件夹来进行再次拆分

- 一个py文件，模块（module）。
- 含多个py文件的文件夹，包（package）。

> 文件名为test.py模块名则是test

当定义好一个模块或包之后，如果想要使用其中定义的功能，必须要先导入，然后再能使用。而在Python开发中常用的导入的方式有2类方式

- import xxx 一般多用于导入同级目录下的一个py文件

  ```python
  import 模块名\包名
  ```

- from xxx import xxx 一般适用于多层嵌套和导入模块中某个成员的情况

  ```python
  from 包名 import 模块名
  from 模块名 import 模块下的变量名或函数名
  ```

> 在Python内部默认设置了一些路径，导入模块或包时，都会按照指定顺序逐一去特定的路径查找。
>
> ```python
> import sys
> print(sys.path)
> ```
>
> 模块名称时，千万不能和内置和第三方的同名

对于 `from xx import xx`这种模式，还支持相对到导入。

> 切记，相对导入只能用在包中的py文件中

如果项目中导入 成员/模块/包 有重名，那么后导入的会覆盖之前导入，为了避免这种情况的发生，Python支持重命名

```python
from xxx.xxx import xx as xo
```

区分py文件的两种用途：一个Python文件有两种用途，一种被当主程序/脚本执行，另一种被当模块导入，为了区别同一个文件的不同用途，每个py文件都内置了`__name__`变量，该变量在py文件被当做脚本执行时赋值为“`__main__`”,在py文件被当做模块导入时赋值为模块名



## 2. 内置模块

### 2.1 OS模块

```python
获得绝对路径: os.path.abspath() 
获取路径名：os.path.dirname()
路径拼接：os.path.join()
判断路径是否存在：os.path.exists()
创建文件夹：os.makedirs()
删除文件或文件夹：os.remove()
查看目录下所有的文件：os.listdir()
查看目录下所有的文件（含子孙文件）: os.walk()
```

### 2.2 random模块

```python
获取范围内的随机整数：random.randint()
获取范围内的随机小数：random.uniform()
随机抽取一个元素：random.choice()
打乱顺序：random.shuffle()
```

### 2.3 json模块

将python的数据格式 转换为json格式的数据，也可以将json格式的数据转换为python的数据格式。

> json格式，是一个数据格式（本质上就是个字符串，常用语网络数据传输）

python的数据类型转换为 json 格式，对数据类型是有要求的，默认只支持：

|   python   |  json  |
| :--------: | :----: |
|    dict    | object |
|    list    | array  |
|    str     | string |
| int, float | number |
|    True    |  true  |
|   False    | false  |
|    None    |  null  |

我们就用json模块的四个功能 dump load dumps loads

json.dump(第一个参数是要转换的数据类型,第二个参数是一个文件句柄就是要存到那个文件中)

json.load(这里放一个文件句柄,就要用从那个文件中读取内容)

dumps是将python中的数据类型转成字符串：dumps(参数是要转换的数据类型)

loads是将python的数据类型转换成字符串的内容在转换成之前的数据类型：loads(要转换成原数据类型的字符串

### 2.4 time模块

在Python中，通常有这几种方式来表示时间：

- 时间戳（timestamp）, 表示的是从1970年1月1日00:00:00开始按秒计算的偏移量。例子：1554864776.161901
- 格式化的时间字符串，比如“2020-10-03 17:54”
- 结构化的时间：struct_time元组共有9个元素共九个元素:(年，月，日，时，分，秒，一年中第几周，一年中第几天，夏令时)

```python
print(time.time()) # 时间戳
print(time.strftime("%Y-%m-%d %X")) #格式化的时间字符串
print(time.localtime()) # 本地时区的struct_time
print(time.gmtime())    # UTC时区的struct_time
```

类型的转换：

时间戳转换结构化时间：localtime、gmtime

结构化时间装换时间戳：mktime

结构化的时间转换格式化的字符串形式的时间：strftime

格式化的字符串形式的时间转换结构化的时间：strptime